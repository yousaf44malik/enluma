"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/token";
exports.ids = ["pages/api/token"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@livekit/protocol":
/*!************************************!*\
  !*** external "@livekit/protocol" ***!
  \************************************/
/***/ ((module) => {

module.exports = import("@livekit/protocol");;

/***/ }),

/***/ "livekit-server-sdk":
/*!*************************************!*\
  !*** external "livekit-server-sdk" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("livekit-server-sdk");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/token.ts */ \"(api)/./src/pages/api/token.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/token\",\n        pathname: \"/api/token\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnRva2VuJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ0b2tlbi50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNxRDtBQUNyRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsb0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG9EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FnZW50cy1wbGF5Z3JvdW5kLz8xNmM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdG9rZW5cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90b2tlblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/util.ts":
/*!*************************!*\
  !*** ./src/lib/util.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomAlphanumeric: () => (/* binding */ generateRandomAlphanumeric)\n/* harmony export */ });\nfunction generateRandomAlphanumeric(length) {\n    const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let result = \"\";\n    const charactersLength = characters.length;\n    for(let i = 0; i < length; i++){\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3V0aWwudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLFNBQVNBLDJCQUEyQkMsTUFBYztJQUN2RCxNQUFNQyxhQUNKO0lBQ0YsSUFBSUMsU0FBUztJQUNiLE1BQU1DLG1CQUFtQkYsV0FBV0QsTUFBTTtJQUUxQyxJQUFLLElBQUlJLElBQUksR0FBR0EsSUFBSUosUUFBUUksSUFBSztRQUMvQkYsVUFBVUQsV0FBV0ksTUFBTSxDQUFDQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS0w7SUFDekQ7SUFFQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdlbnRzLXBsYXlncm91bmQvLi9zcmMvbGliL3V0aWwudHM/ZjgzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYW51bWVyaWMobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm5hbWVzIjpbImdlbmVyYXRlUmFuZG9tQWxwaGFudW1lcmljIiwibGVuZ3RoIiwiY2hhcmFjdGVycyIsInJlc3VsdCIsImNoYXJhY3RlcnNMZW5ndGgiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/util.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/token.ts":
/*!********************************!*\
  !*** ./src/pages/api/token.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handleToken)\n/* harmony export */ });\n/* harmony import */ var _lib_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/util */ \"(api)/./src/lib/util.ts\");\n/* harmony import */ var livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-server-sdk */ \"livekit-server-sdk\");\n/* harmony import */ var _livekit_protocol__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livekit/protocol */ \"@livekit/protocol\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__, _livekit_protocol__WEBPACK_IMPORTED_MODULE_2__]);\n([livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__, _livekit_protocol__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst apiKey = process.env.LIVEKIT_API_KEY;\nconst apiSecret = process.env.LIVEKIT_API_SECRET;\nconst createToken = (userInfo, grant, agentName)=>{\n    const at = new livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__.AccessToken(apiKey, apiSecret, userInfo);\n    at.addGrant(grant);\n    if (agentName) {\n        at.roomConfig = new _livekit_protocol__WEBPACK_IMPORTED_MODULE_2__.RoomConfiguration({\n            agents: [\n                new _livekit_protocol__WEBPACK_IMPORTED_MODULE_2__.RoomAgentDispatch({\n                    agentName: agentName,\n                    metadata: '{\"user_id\": \"12345\"}'\n                })\n            ]\n        });\n    }\n    return at.toJwt();\n};\nasync function handleToken(req, res) {\n    try {\n        if (req.method !== \"POST\") {\n            res.setHeader(\"Allow\", \"POST\");\n            res.status(405).end(\"Method Not Allowed\");\n            return;\n        }\n        if (!apiKey || !apiSecret) {\n            res.statusMessage = \"Environment variables aren't set up correctly\";\n            res.status(500).end();\n            return;\n        }\n        const { roomName: roomNameFromBody, participantName: participantNameFromBody, participantId: participantIdFromBody, metadata: metadataFromBody, attributes: attributesFromBody, agentName: agentNameFromBody } = req.body;\n        // Get room name from query params or generate random one\n        const roomName = roomNameFromBody || `room-${(0,_lib_util__WEBPACK_IMPORTED_MODULE_0__.generateRandomAlphanumeric)(4)}-${(0,_lib_util__WEBPACK_IMPORTED_MODULE_0__.generateRandomAlphanumeric)(4)}`;\n        // Get participant name from query params or generate random one\n        const identity = participantIdFromBody || `identity-${(0,_lib_util__WEBPACK_IMPORTED_MODULE_0__.generateRandomAlphanumeric)(4)}`;\n        // Get agent name from query params or use none (automatic dispatch)\n        const agentName = agentNameFromBody || undefined;\n        // Get metadata and attributes from query params\n        const metadata = metadataFromBody;\n        const attributesStr = attributesFromBody;\n        const attributes = attributesStr || {};\n        const participantName = participantNameFromBody || identity;\n        const grant = {\n            room: roomName,\n            roomJoin: true,\n            canPublish: true,\n            canPublishData: true,\n            canSubscribe: true,\n            canUpdateOwnMetadata: true\n        };\n        const token = await createToken({\n            identity,\n            metadata,\n            attributes,\n            name: participantName\n        }, grant, agentName);\n        const result = {\n            identity,\n            accessToken: token\n        };\n        res.status(200).json(result);\n    } catch (e) {\n        res.statusMessage = e.message;\n        res.status(500).end();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDd0Q7QUFFUDtBQUN3QjtBQUl6RSxNQUFNSSxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7QUFDMUMsTUFBTUMsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxrQkFBa0I7QUFFaEQsTUFBTUMsY0FBYyxDQUNsQkMsVUFDQUMsT0FDQUM7SUFFQSxNQUFNQyxLQUFLLElBQUliLDJEQUFXQSxDQUFDRyxRQUFRSSxXQUFXRztJQUM5Q0csR0FBR0MsUUFBUSxDQUFDSDtJQUNaLElBQUlDLFdBQVc7UUFDYkMsR0FBR0UsVUFBVSxHQUFHLElBQUliLGdFQUFpQkEsQ0FBQztZQUNwQ2MsUUFBUTtnQkFDTixJQUFJZixnRUFBaUJBLENBQUM7b0JBQ3BCVyxXQUFXQTtvQkFDWEssVUFBVTtnQkFDWjthQUNEO1FBQ0g7SUFDRjtJQUNBLE9BQU9KLEdBQUdLLEtBQUs7QUFDakI7QUFFZSxlQUFlQyxZQUM1QkMsR0FBbUIsRUFDbkJDLEdBQW9CO0lBRXBCLElBQUk7UUFDRixJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtZQUN6QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7WUFDdkJGLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUM7WUFDcEI7UUFDRjtRQUNBLElBQUksQ0FBQ3RCLFVBQVUsQ0FBQ0ksV0FBVztZQUN6QmMsSUFBSUssYUFBYSxHQUFHO1lBQ3BCTCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztZQUNuQjtRQUNGO1FBRUEsTUFBTSxFQUNKRSxVQUFVQyxnQkFBZ0IsRUFDMUJDLGlCQUFpQkMsdUJBQXVCLEVBQ3hDQyxlQUFlQyxxQkFBcUIsRUFDcENmLFVBQVVnQixnQkFBZ0IsRUFDMUJDLFlBQVlDLGtCQUFrQixFQUM5QnZCLFdBQVd3QixpQkFBaUIsRUFDN0IsR0FBR2hCLElBQUlpQixJQUFJO1FBRVoseURBQXlEO1FBQ3pELE1BQU1WLFdBQ0osb0JBQ0EsQ0FBQyxLQUFLLEVBQUU1QixxRUFBMEJBLENBQUMsR0FBRyxDQUFDLEVBQUVBLHFFQUEwQkEsQ0FBQyxHQUFHLENBQUM7UUFFMUUsZ0VBQWdFO1FBQ2hFLE1BQU11QyxXQUNKLHlCQUNBLENBQUMsU0FBUyxFQUFFdkMscUVBQTBCQSxDQUFDLEdBQUcsQ0FBQztRQUU3QyxvRUFBb0U7UUFDcEUsTUFBTWEsWUFBWSxxQkFBaUMyQjtRQUVuRCxnREFBZ0Q7UUFDaEQsTUFBTXRCLFdBQVdnQjtRQUNqQixNQUFNTyxnQkFBZ0JMO1FBQ3RCLE1BQU1ELGFBQWFNLGlCQUFpQixDQUFDO1FBRXJDLE1BQU1YLGtCQUFrQkMsMkJBQTJCUTtRQUVuRCxNQUFNM0IsUUFBb0I7WUFDeEI4QixNQUFNZDtZQUNOZSxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsZ0JBQWdCO1lBQ2hCQyxjQUFjO1lBQ2RDLHNCQUFzQjtRQUN4QjtRQUVBLE1BQU1DLFFBQVEsTUFBTXRDLFlBQ2xCO1lBQUU2QjtZQUFVckI7WUFBVWlCO1lBQVljLE1BQU1uQjtRQUFnQixHQUN4RGxCLE9BQ0FDO1FBRUYsTUFBTXFDLFNBQXNCO1lBQzFCWDtZQUNBWSxhQUFhSDtRQUNmO1FBRUExQixJQUFJRyxNQUFNLENBQUMsS0FBSzJCLElBQUksQ0FBQ0Y7SUFDdkIsRUFBRSxPQUFPRyxHQUFHO1FBQ1YvQixJQUFJSyxhQUFhLEdBQUcsRUFBYTJCLE9BQU87UUFDeENoQyxJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdlbnRzLXBsYXlncm91bmQvLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzP2MyOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbUFscGhhbnVtZXJpYyB9IGZyb20gXCJAL2xpYi91dGlsXCI7XG5cbmltcG9ydCB7IEFjY2Vzc1Rva2VuIH0gZnJvbSBcImxpdmVraXQtc2VydmVyLXNka1wiO1xuaW1wb3J0IHsgUm9vbUFnZW50RGlzcGF0Y2gsIFJvb21Db25maWd1cmF0aW9uIH0gZnJvbSBcIkBsaXZla2l0L3Byb3RvY29sXCI7XG5pbXBvcnQgdHlwZSB7IEFjY2Vzc1Rva2VuT3B0aW9ucywgVmlkZW9HcmFudCB9IGZyb20gXCJsaXZla2l0LXNlcnZlci1zZGtcIjtcbmltcG9ydCB7IFRva2VuUmVzdWx0IH0gZnJvbSBcIi4uLy4uL2xpYi90eXBlc1wiO1xuXG5jb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5MSVZFS0lUX0FQSV9LRVk7XG5jb25zdCBhcGlTZWNyZXQgPSBwcm9jZXNzLmVudi5MSVZFS0lUX0FQSV9TRUNSRVQ7XG5cbmNvbnN0IGNyZWF0ZVRva2VuID0gKFxuICB1c2VySW5mbzogQWNjZXNzVG9rZW5PcHRpb25zLFxuICBncmFudDogVmlkZW9HcmFudCxcbiAgYWdlbnROYW1lPzogc3RyaW5nLFxuKSA9PiB7XG4gIGNvbnN0IGF0ID0gbmV3IEFjY2Vzc1Rva2VuKGFwaUtleSwgYXBpU2VjcmV0LCB1c2VySW5mbyk7XG4gIGF0LmFkZEdyYW50KGdyYW50KTtcbiAgaWYgKGFnZW50TmFtZSkge1xuICAgIGF0LnJvb21Db25maWcgPSBuZXcgUm9vbUNvbmZpZ3VyYXRpb24oe1xuICAgICAgYWdlbnRzOiBbXG4gICAgICAgIG5ldyBSb29tQWdlbnREaXNwYXRjaCh7XG4gICAgICAgICAgYWdlbnROYW1lOiBhZ2VudE5hbWUsXG4gICAgICAgICAgbWV0YWRhdGE6ICd7XCJ1c2VyX2lkXCI6IFwiMTIzNDVcIn0nLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGF0LnRvSnd0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVUb2tlbihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2UsXG4pIHtcbiAgdHJ5IHtcbiAgICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBcIlBPU1RcIik7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWFwaUtleSB8fCAhYXBpU2VjcmV0KSB7XG4gICAgICByZXMuc3RhdHVzTWVzc2FnZSA9IFwiRW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZW4ndCBzZXQgdXAgY29ycmVjdGx5XCI7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgcm9vbU5hbWU6IHJvb21OYW1lRnJvbUJvZHksXG4gICAgICBwYXJ0aWNpcGFudE5hbWU6IHBhcnRpY2lwYW50TmFtZUZyb21Cb2R5LFxuICAgICAgcGFydGljaXBhbnRJZDogcGFydGljaXBhbnRJZEZyb21Cb2R5LFxuICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhRnJvbUJvZHksXG4gICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzRnJvbUJvZHksXG4gICAgICBhZ2VudE5hbWU6IGFnZW50TmFtZUZyb21Cb2R5LFxuICAgIH0gPSByZXEuYm9keTtcblxuICAgIC8vIEdldCByb29tIG5hbWUgZnJvbSBxdWVyeSBwYXJhbXMgb3IgZ2VuZXJhdGUgcmFuZG9tIG9uZVxuICAgIGNvbnN0IHJvb21OYW1lID1cbiAgICAgIChyb29tTmFtZUZyb21Cb2R5IGFzIHN0cmluZykgfHxcbiAgICAgIGByb29tLSR7Z2VuZXJhdGVSYW5kb21BbHBoYW51bWVyaWMoNCl9LSR7Z2VuZXJhdGVSYW5kb21BbHBoYW51bWVyaWMoNCl9YDtcblxuICAgIC8vIEdldCBwYXJ0aWNpcGFudCBuYW1lIGZyb20gcXVlcnkgcGFyYW1zIG9yIGdlbmVyYXRlIHJhbmRvbSBvbmVcbiAgICBjb25zdCBpZGVudGl0eSA9XG4gICAgICAocGFydGljaXBhbnRJZEZyb21Cb2R5IGFzIHN0cmluZykgfHxcbiAgICAgIGBpZGVudGl0eS0ke2dlbmVyYXRlUmFuZG9tQWxwaGFudW1lcmljKDQpfWA7XG5cbiAgICAvLyBHZXQgYWdlbnQgbmFtZSBmcm9tIHF1ZXJ5IHBhcmFtcyBvciB1c2Ugbm9uZSAoYXV0b21hdGljIGRpc3BhdGNoKVxuICAgIGNvbnN0IGFnZW50TmFtZSA9IChhZ2VudE5hbWVGcm9tQm9keSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblxuICAgIC8vIEdldCBtZXRhZGF0YSBhbmQgYXR0cmlidXRlcyBmcm9tIHF1ZXJ5IHBhcmFtc1xuICAgIGNvbnN0IG1ldGFkYXRhID0gbWV0YWRhdGFGcm9tQm9keSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgYXR0cmlidXRlc1N0ciA9IGF0dHJpYnV0ZXNGcm9tQm9keSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNTdHIgfHwge307XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudE5hbWUgPSBwYXJ0aWNpcGFudE5hbWVGcm9tQm9keSB8fCBpZGVudGl0eTtcblxuICAgIGNvbnN0IGdyYW50OiBWaWRlb0dyYW50ID0ge1xuICAgICAgcm9vbTogcm9vbU5hbWUsXG4gICAgICByb29tSm9pbjogdHJ1ZSxcbiAgICAgIGNhblB1Ymxpc2g6IHRydWUsXG4gICAgICBjYW5QdWJsaXNoRGF0YTogdHJ1ZSxcbiAgICAgIGNhblN1YnNjcmliZTogdHJ1ZSxcbiAgICAgIGNhblVwZGF0ZU93bk1ldGFkYXRhOiB0cnVlLFxuICAgIH07XG5cbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZVRva2VuKFxuICAgICAgeyBpZGVudGl0eSwgbWV0YWRhdGEsIGF0dHJpYnV0ZXMsIG5hbWU6IHBhcnRpY2lwYW50TmFtZSB9LFxuICAgICAgZ3JhbnQsXG4gICAgICBhZ2VudE5hbWUsXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQ6IFRva2VuUmVzdWx0ID0ge1xuICAgICAgaWRlbnRpdHksXG4gICAgICBhY2Nlc3NUb2tlbjogdG9rZW4sXG4gICAgfTtcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXMuc3RhdHVzTWVzc2FnZSA9IChlIGFzIEVycm9yKS5tZXNzYWdlO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5lbmQoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdlbmVyYXRlUmFuZG9tQWxwaGFudW1lcmljIiwiQWNjZXNzVG9rZW4iLCJSb29tQWdlbnREaXNwYXRjaCIsIlJvb21Db25maWd1cmF0aW9uIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkxJVkVLSVRfQVBJX0tFWSIsImFwaVNlY3JldCIsIkxJVkVLSVRfQVBJX1NFQ1JFVCIsImNyZWF0ZVRva2VuIiwidXNlckluZm8iLCJncmFudCIsImFnZW50TmFtZSIsImF0IiwiYWRkR3JhbnQiLCJyb29tQ29uZmlnIiwiYWdlbnRzIiwibWV0YWRhdGEiLCJ0b0p3dCIsImhhbmRsZVRva2VuIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwic3RhdHVzTWVzc2FnZSIsInJvb21OYW1lIiwicm9vbU5hbWVGcm9tQm9keSIsInBhcnRpY2lwYW50TmFtZSIsInBhcnRpY2lwYW50TmFtZUZyb21Cb2R5IiwicGFydGljaXBhbnRJZCIsInBhcnRpY2lwYW50SWRGcm9tQm9keSIsIm1ldGFkYXRhRnJvbUJvZHkiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlc0Zyb21Cb2R5IiwiYWdlbnROYW1lRnJvbUJvZHkiLCJib2R5IiwiaWRlbnRpdHkiLCJ1bmRlZmluZWQiLCJhdHRyaWJ1dGVzU3RyIiwicm9vbSIsInJvb21Kb2luIiwiY2FuUHVibGlzaCIsImNhblB1Ymxpc2hEYXRhIiwiY2FuU3Vic2NyaWJlIiwiY2FuVXBkYXRlT3duTWV0YWRhdGEiLCJ0b2tlbiIsIm5hbWUiLCJyZXN1bHQiLCJhY2Nlc3NUb2tlbiIsImpzb24iLCJlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/token.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();